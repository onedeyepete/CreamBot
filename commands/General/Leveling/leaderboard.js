(function(_0x5e8b10,_0x2e1c8d){const _0x309bdf=_0x5e8b10();function _0x5dc79c(_0x2c83aa,_0x2ab5d9){return _0x191c(_0x2c83aa- -0x1e5,_0x2ab5d9);}while(!![]){try{const _0x2b6a1d=-parseInt(_0x5dc79c(-0xb,0x8))/0x1*(parseInt(_0x5dc79c(-0xa,-0x10))/0x2)+parseInt(_0x5dc79c(-0x10,-0xb))/0x3+-parseInt(_0x5dc79c(0xf,-0x10))/0x4+-parseInt(_0x5dc79c(0xb,0x1b))/0x5*(parseInt(_0x5dc79c(-0x3,0x1))/0x6)+parseInt(_0x5dc79c(-0x1a,-0xc))/0x7+parseInt(_0x5dc79c(0x17,0x3c))/0x8*(-parseInt(_0x5dc79c(0x1d,0xe))/0x9)+parseInt(_0x5dc79c(0x12,-0x2))/0xa;if(_0x2b6a1d===_0x2e1c8d)break;else _0x309bdf['push'](_0x309bdf['shift']());}catch(_0xbac819){_0x309bdf['push'](_0x309bdf['shift']());}}}(_0x1d89,0x9f3d8));const {SlashCommandBuilder,EmbedBuilder,AttachmentBuilder}=require(_0x3be2a9(0x57f,0x57f)),fs=require('fs'),yaml=require(_0x3be2a9(0x53d,0x554)),moment=require(_0x3be2a9(0x53e,0x541)),config=yaml['load'](fs[_0x3be2a9(0x56f,0x55c)](_0x3be2a9(0x561,0x555),_0x3be2a9(0x571,0x55a))),lang=yaml['load'](fs[_0x3be2a9(0x56f,0x57c)](_0x3be2a9(0x548,0x53c),_0x3be2a9(0x571,0x570))),UserData=require(_0x3be2a9(0x554,0x562)),{LeaderboardBuilder,Font}=require(_0x3be2a9(0x536,0x51b)),defaultAvatarUrl=_0x3be2a9(0x579,0x57e),defaultUser={'avatar':defaultAvatarUrl,'username':_0x3be2a9(0x55f,0x53d),'displayName':'Unknown\x20User','level':0x0,'xp':0x0,'rank':0x0};function _0x191c(_0x476946,_0x34a4ff){const _0x1d89ab=_0x1d89();return _0x191c=function(_0x191ccc,_0x3fcd3c){_0x191ccc=_0x191ccc-0x1cb;let _0x54ac23=_0x1d89ab[_0x191ccc];return _0x54ac23;},_0x191c(_0x476946,_0x34a4ff);}module[_0x3be2a9(0x552,0x563)]={'data':new SlashCommandBuilder()[_0x3be2a9(0x53b,0x526)]('leaderboard')[_0x3be2a9(0x574,0x54f)](_0x3be2a9(0x537,0x53f))['addSubcommand'](_0x477c6c=>_0x477c6c['setName'](_0x3be2a9(0x578,0x58e))[_0x3be2a9(0x574,0x576)](_0x3be2a9(0x540,0x528)))[_0x3be2a9(0x556,0x53e)](_0x4c80d0=>_0x4c80d0[_0x3be2a9(0x53b,0x52d)](_0x3be2a9(0x570,0x588))[_0x3be2a9(0x574,0x54f)](_0x3be2a9(0x575,0x56a))),async 'execute'(_0x25c86a){function _0x44bd6c(_0x4f4826,_0x21b105){return _0x3be2a9(_0x21b105- -0x59b,_0x4f4826);}try{await _0x25c86a['deferReply']();const _0xaaa166=_0x25c86a[_0x44bd6c(-0x32,-0x56)]['getSubcommand'](),_0xfa8086=_0x25c86a['guild'][_0x44bd6c(-0xd,-0x2e)],_0x35278d=_0x25c86a[_0x44bd6c(-0x27,-0x24)][_0x44bd6c(-0x33,-0x2d)]()?_0x25c86a[_0x44bd6c(-0x1d,-0x24)][_0x44bd6c(-0xe,-0x2d)]({'size':0x200}):defaultAvatarUrl;Font[_0x44bd6c(-0x66,-0x66)]();const _0x5931ec=_0xaaa166==='levels'?{'level':-0x1,'xp':-0x1}:{'totalMessages':-0x1},_0x40dd88=await UserData[_0x44bd6c(-0xd,-0x1f)]({'guildId':_0x25c86a[_0x44bd6c(-0x30,-0x24)]['id']})[_0x44bd6c(-0x54,-0x37)](_0x5931ec)[_0x44bd6c(-0x61,-0x5c)](0x5);if(_0xaaa166===_0x44bd6c(-0x2b,-0x2b)){const _0x3a9550=await generateMessagesEmbed(_0x40dd88,_0x25c86a[_0x44bd6c(-0x21,-0x24)]),_0xc144d3=new EmbedBuilder()[_0x44bd6c(-0x55,-0x58)](lang[_0x44bd6c(-0x6d,-0x4e)][_0x44bd6c(-0x57,-0x48)][_0x44bd6c(-0x36,-0x4f)][_0x44bd6c(-0xb,-0x31)]('{guild}',_0xfa8086))[_0x44bd6c(-0x31,-0x34)](config[_0x44bd6c(-0x37,-0x55)])[_0x44bd6c(0x0,-0x27)](_0x3a9550)[_0x44bd6c(-0x19,-0x30)]({'text':lang[_0x44bd6c(-0x4e,-0x4e)]['Messages'][_0x44bd6c(-0x32,-0x21)][_0x44bd6c(-0x37,-0x31)](_0x44bd6c(-0x41,-0x42),moment()['tz'](config['Timezone'])[_0x44bd6c(-0x57,-0x51)](_0x44bd6c(-0x46,-0x25))),'iconURL':_0x35278d});await _0x25c86a[_0x44bd6c(-0x7e,-0x63)]({'embeds':[_0xc144d3]});}else{if(_0xaaa166===_0x44bd6c(-0x34,-0x23)){const _0x4620f7=await fetchUserDetails(_0x40dd88,_0x25c86a[_0x44bd6c(-0x21,-0x24)]),_0x1c8948=new LeaderboardBuilder()[_0x44bd6c(-0x11,-0x28)]({'title':_0xfa8086,'image':_0x35278d,'subtitle':lang[_0x44bd6c(-0x50,-0x4e)]['XP'][_0x44bd6c(-0x3f,-0x4f)]})['setVariant'](_0x44bd6c(-0x65,-0x3e))[_0x44bd6c(-0x40,-0x2f)](_0x4620f7),_0x271d76=await _0x1c8948[_0x44bd6c(-0x33,-0x57)]({'extension':'png'})[_0x44bd6c(-0x23,-0x46)](handleRateLimitError);if(_0x271d76){const _0x5cd425=new AttachmentBuilder(_0x271d76,{'name':_0x44bd6c(-0x3b,-0x33)});await _0x25c86a[_0x44bd6c(-0x4b,-0x63)]({'files':[_0x5cd425]});}}}}catch(_0x4533e4){if(_0x4533e4[_0x44bd6c(-0x2a,-0x3b)]){}await _0x25c86a['editReply']({'content':lang['Leaderboard'][_0x44bd6c(-0x4d,-0x4b)][_0x44bd6c(-0x36,-0x31)](/{guild}/g,_0x25c86a[_0x44bd6c(-0x21,-0x24)][_0x44bd6c(-0xd,-0x2e)]),'ephemeral':!![]});}}};async function generateMessagesEmbed(_0x4bc5d0,_0x38c318){function _0x1c0cdb(_0x11d107,_0x376e98){return _0x3be2a9(_0x11d107- -0x5d4,_0x376e98);}return Promise['all'](_0x4bc5d0[_0x1c0cdb(-0xa0,-0xb1)](async(_0x22983b,_0x49d543)=>{function _0x32fe59(_0x31bf78,_0x5629dc){return _0x1c0cdb(_0x31bf78- -0xc2,_0x5629dc);}try{const _0x15661f=await _0x38c318['members'][_0x32fe59(-0x11b,-0x126)](_0x22983b[_0x32fe59(-0x134,-0x123)]);return _0x49d543+0x1+_0x32fe59(-0x13a,-0x119)+_0x15661f['id']+_0x32fe59(-0x131,-0x12c)+lang[_0x32fe59(-0x149,-0x157)][_0x32fe59(-0x143,-0x15f)][_0x32fe59(-0x143,-0x140)]['replace'](_0x32fe59(-0x118,-0x13a),_0x22983b[_0x32fe59(-0x148,-0x125)])['replace'](_0x32fe59(-0x124,-0x10a),lang[_0x32fe59(-0x143,-0x144)]);}catch(_0x459645){if(_0x459645['code']===0x2717)return _0x49d543+0x1+_0x32fe59(-0x163,-0x174)+_0x22983b[_0x32fe59(-0x148,-0x163)]+'\x20'+lang[_0x32fe59(-0x143,-0x153)];throw _0x459645;}}))[_0x1c0cdb(-0x9a,-0x85)](_0x1155b4=>_0x1155b4['join']('\x0a'));}async function fetchUserDetails(_0x4c33b5,_0x11e8b3){function _0x481b1a(_0x2c5d57,_0xa22cf9){return _0x3be2a9(_0xa22cf9- -0x432,_0x2c5d57);}return Promise[_0x481b1a(0x138,0x119)](_0x4c33b5[_0x481b1a(0x116,0x102)](async(_0x4f555f,_0x42444f)=>{function _0x48c04f(_0x3f60d2,_0x5d15c7){return _0x481b1a(_0x5d15c7,_0x3f60d2-0x82);}try{const _0x1d4ee7=await _0x11e8b3[_0x48c04f(0x1a8,0x1a1)]['fetch'](_0x4f555f[_0x48c04f(0x1b2,0x1a9)]);return{'avatar':_0x1d4ee7['user']['displayAvatarURL']({'dynamic':!![],'size':0x200}),'username':_0x1d4ee7[_0x48c04f(0x1aa,0x199)]['tag'],'displayName':_0x1d4ee7['displayName']||_0x1d4ee7[_0x48c04f(0x1aa,0x1c4)][_0x48c04f(0x1cd,0x1d8)],'level':_0x4f555f[_0x48c04f(0x19f,0x198)],'xp':_0x4f555f['xp'],'rank':_0x42444f+0x1};}catch(_0xb9b602){if(_0xb9b602['code']===0x2717)return{...defaultUser,'rank':_0x42444f+0x1};throw _0xb9b602;}}));}function _0x3be2a9(_0x450df8,_0x17aa58){return _0x191c(_0x450df8-0x367,_0x17aa58);}function _0x1d89(){const _0x3bda3a=['setFooter','setPlayers','name','iconURL','readFileSync','messages','utf8','{messages}','setHeader','setDescription','View\x20the\x20top\x205\x20users\x20with\x20the\x20most\x20messages','MMMM\x20Do\x20YYYY,\x20HH:mm','guild','levels','https://i.imgur.com/yygn7ni.png','Footer','fetch','find','username','{count}','discord.js','719614AKJmhW','.\x20Unknown\x20User\x20-\x20','map','loadDefault','canvacord','View\x20leaderboards','editReply','statusCode','then','setName','3228738ZbjAJI','js-yaml','moment-timezone','limit','View\x20the\x20top\x205\x20users\x20with\x20the\x20highest\x20level','549kCahkO','3092lOOEnr','setTitle','build','options','SuccessEmbedColor','Rate\x20limit\x20exceeded:','./lang.yml','23406BffcCn','format','all','Top','Leaderboard','totalMessages','level','Error','message','exports','Messages','../../../models/UserData','catch','addSubcommand','10pErCDn','members','{date}','user','2697336npMVOd','.\x20<@','default','15763210GHUUpc','Unknown','response','./config.yml','userId','416168ribQOw','sort','>\x20-\x20','warn','setColor','leaderboards.png','99FRcQsk','replace'];_0x1d89=function(){return _0x3bda3a;};return _0x1d89();}function handleRateLimitError(_0x5e3f5b){function _0x56b9cd(_0x1914e2,_0x4255d1){return _0x3be2a9(_0x1914e2- -0x52d,_0x4255d1);}if(_0x5e3f5b[_0x56b9cd(0xc,-0x2)]===0x1ad)console[_0x56b9cd(0x39,0x38)](_0x56b9cd(0x1a,0x30),_0x5e3f5b[_0x56b9cd(0x24,0x15)]);else throw _0x5e3f5b;}