(function(_0x2925ef,_0x3cbd0a){const _0x39e8c2=_0x2925ef();function _0x3c072f(_0x3a36c5,_0x14443d){return _0x3f8e(_0x14443d- -0x1e3,_0x3a36c5);}while(!![]){try{const _0x1e4962=-parseInt(_0x3c072f(-0x58,-0x61))/0x1+parseInt(_0x3c072f(-0x33,-0x3c))/0x2*(parseInt(_0x3c072f(-0xa2,-0x83))/0x3)+parseInt(_0x3c072f(-0x33,-0x2f))/0x4*(parseInt(_0x3c072f(-0x8e,-0x65))/0x5)+-parseInt(_0x3c072f(-0x57,-0x67))/0x6+-parseInt(_0x3c072f(-0x7c,-0x54))/0x7+parseInt(_0x3c072f(-0x42,-0x45))/0x8+parseInt(_0x3c072f(-0x4d,-0x40))/0x9;if(_0x1e4962===_0x3cbd0a)break;else _0x39e8c2['push'](_0x39e8c2['shift']());}catch(_0x59d023){_0x39e8c2['push'](_0x39e8c2['shift']());}}}(_0x67d4,0xc6bc0));const {SlashCommandBuilder,EmbedBuilder}=require(_0x4cb91d(0xbb,0xc6)),fs=require('fs'),yaml=require(_0x4cb91d(0x100,0x10c)),ms=require(_0x4cb91d(0xdd,0xff)),AFK=require(_0x4cb91d(0xd0,0xbf)),config=yaml['load'](fs[_0x4cb91d(0x101,0xe5)]('./config.yml',_0x4cb91d(0xb8,0xa8)));function _0x3f8e(_0x4402b3,_0x26dcf8){const _0x67d4dd=_0x67d4();return _0x3f8e=function(_0x3f8e2b,_0x16179f){_0x3f8e2b=_0x3f8e2b-0x160;let _0x5339de=_0x67d4dd[_0x3f8e2b];return _0x5339de;},_0x3f8e(_0x4402b3,_0x26dcf8);}function _0x4cb91d(_0x39b677,_0x5a155e){return _0x3f8e(_0x39b677- -0xaa,_0x5a155e);}const lang=yaml['load'](fs[_0x4cb91d(0x101,0xe1)]('./lang.yml',_0x4cb91d(0xb8,0xe2))),replacePlaceholders=(_0x2509cc,_0x3c1ea8={})=>{function _0x50681c(_0x100707,_0x48e4da){return _0x4cb91d(_0x100707-0x18c,_0x48e4da);}if(!_0x2509cc)return'â€‹';return Object[_0x50681c(0x27e,0x27d)](_0x3c1ea8)[_0x50681c(0x279,0x26f)]((_0x6b75d5,_0x2d89fb)=>{const _0xce8c67=new RegExp('{'+_0x2d89fb+'}','gi');return _0x6b75d5['replace'](_0xce8c67,_0x3c1ea8[_0x2d89fb]||'');},_0x2509cc);},handleRolePermissionCheck=_0x135565=>{function _0x1f83a0(_0x48afd7,_0x9277c7){return _0x4cb91d(_0x9277c7-0x13,_0x48afd7);}if(!config[_0x1f83a0(0xe0,0xe8)][_0x1f83a0(0xf4,0xff)]){const _0x2fbcdd=config[_0x1f83a0(0xd3,0xe8)]['AllowRoles'],_0x5cd38b=_0x135565['member'][_0x1f83a0(0xf7,0xdd)][_0x1f83a0(0xcb,0xee)][_0x1f83a0(0xe3,0xfb)](_0x33d2e1=>_0x33d2e1['id']),_0x2534da=_0x5cd38b[_0x1f83a0(0x109,0x11e)](_0x3b95e3=>_0x2fbcdd[_0x1f83a0(0xac,0xca)](_0x3b95e3));if(!_0x2534da)throw new Error(lang[_0x1f83a0(0xd1,0xe8)]['ErrorMessges'][_0x1f83a0(0x12e,0x104)]||_0x1f83a0(0x117,0x102));}},handleTimeFormatCheck=_0x3ed0f5=>{const _0x1859cd=/^(\d+)(s|m|h|d)$/;function _0x34df46(_0xebc526,_0x40f7d1){return _0x4cb91d(_0xebc526- -0x23,_0x40f7d1);}if(!_0x1859cd[_0x34df46(0x97,0xc1)](_0x3ed0f5))throw new Error(lang[_0x34df46(0xb2,0xd0)][_0x34df46(0xb6,0xb0)][_0x34df46(0xa0,0x8e)]||_0x34df46(0xa6,0xa8));},handleNicknameUpdate=async(_0x2682fa,_0x70d599,_0x3a5dcb)=>{function _0x10b0ba(_0x51dedc,_0x481725){return _0x4cb91d(_0x51dedc-0x300,_0x481725);}const _0x2b2610=await _0x2682fa[_0x10b0ba(0x407,0x3ea)][_0x10b0ba(0x3eb,0x3e1)][_0x10b0ba(0x3fc,0x3e9)](_0x2682fa[_0x10b0ba(0x3c0,0x3a6)]['id']);try{await _0x2b2610[_0x10b0ba(0x3cc,0x3db)](_0x3a5dcb);}catch(_0x4b2af4){throw new Error(lang[_0x10b0ba(0x3d5,0x3eb)][_0x10b0ba(0x3d9,0x3bb)][_0x10b0ba(0x3e3,0x3f9)]||_0x10b0ba(0x3df,0x3db));}},handleAFKRoleAssignment=async _0x5707ad=>{let _0x388124=_0x5707ad['guild'][_0x4752af(-0x100,-0x128)][_0x4752af(-0x12c,-0x117)]['find'](_0x4c215a=>_0x4c215a[_0x4752af(-0xec,-0xfb)]===config[_0x4752af(-0x12c,-0x11d)][_0x4752af(-0x10a,-0x125)]);if(!_0x388124)try{_0x388124=await _0x5707ad['guild'][_0x4752af(-0x14a,-0x128)][_0x4752af(-0x113,-0x127)]({'name':config['AFK'][_0x4752af(-0x107,-0x125)],'color':config[_0x4752af(-0x10a,-0x11d)][_0x4752af(-0x148,-0x11c)],'reason':_0x4752af(-0x135,-0x139)});}catch(_0x43963b){throw new Error(lang[_0x4752af(-0x13d,-0x11d)][_0x4752af(-0xf0,-0x119)][_0x4752af(-0x158,-0x12e)]||_0x4752af(-0xc6,-0xec));}function _0x4752af(_0x72128b,_0x57dec4){return _0x4cb91d(_0x57dec4- -0x1f2,_0x72128b);}const _0x162393=await _0x5707ad[_0x4752af(-0x111,-0xeb)][_0x4752af(-0x10e,-0x107)]['fetch'](_0x5707ad['user']['id']);await _0x162393[_0x4752af(-0x100,-0x128)][_0x4752af(-0xe9,-0xf8)](_0x388124);},createNotifyMessage=async(_0x24367b,_0x3cf442,_0x1f4e7a)=>{function _0x1d0f1a(_0x13d07c,_0x1e4eac){return _0x4cb91d(_0x1e4eac-0x274,_0x13d07c);}if(config[_0x1d0f1a(0x371,0x349)][_0x1d0f1a(0x383,0x37d)]){const _0x1aae49=new EmbedBuilder()[_0x1d0f1a(0x373,0x369)](config[_0x1d0f1a(0x353,0x349)][_0x1d0f1a(0x359,0x342)][_0x1d0f1a(0x31f,0x333)]);config[_0x1d0f1a(0x363,0x349)][_0x1d0f1a(0x338,0x342)]['Title']&&_0x1aae49[_0x1d0f1a(0x394,0x380)](replacePlaceholders(config[_0x1d0f1a(0x36e,0x349)]['NotifyEmbed']['Title'],_0x3cf442));config['AFK'][_0x1d0f1a(0x35a,0x342)][_0x1d0f1a(0x33c,0x347)]&&_0x1aae49[_0x1d0f1a(0x34d,0x355)](config[_0x1d0f1a(0x32d,0x349)]['NotifyEmbed']['EmbedImage']);config[_0x1d0f1a(0x32d,0x349)][_0x1d0f1a(0x32d,0x342)][_0x1d0f1a(0x34b,0x34e)]&&_0x1aae49[_0x1d0f1a(0x366,0x343)](config[_0x1d0f1a(0x343,0x349)][_0x1d0f1a(0x349,0x342)][_0x1d0f1a(0x375,0x34e)]);let _0x7c51f3=config[_0x1d0f1a(0x36f,0x349)][_0x1d0f1a(0x36a,0x342)][_0x1d0f1a(0x386,0x372)]['map'](_0x5b0b18=>replacePlaceholders(_0x5b0b18,_0x3cf442));return _0x1f4e7a&&_0x7c51f3['pop'](),_0x1aae49[_0x1d0f1a(0x30c,0x330)](_0x7c51f3[_0x1d0f1a(0x380,0x36f)]('\x0a')),await _0x24367b[_0x1d0f1a(0x320,0x345)][_0x1d0f1a(0x332,0x35d)]({'embeds':[_0x1aae49]});}else{const _0x17a512=replacePlaceholders(config[_0x1d0f1a(0x375,0x349)][_0x1d0f1a(0x376,0x35a)],_0x3cf442);return await _0x24367b[_0x1d0f1a(0x33b,0x345)][_0x1d0f1a(0x36a,0x35d)](_0x17a512);}};module[_0x4cb91d(0xe0,0xc5)]={'data':new SlashCommandBuilder()[_0x4cb91d(0x108,0x121)]('afk')[_0x4cb91d(0xbc,0xe7)](_0x4cb91d(0xea,0xf4))['addStringOption'](_0x5509a3=>_0x5509a3['setName'](_0x4cb91d(0xc7,0xf2))[_0x4cb91d(0xbc,0x92)]('Your\x20AFK\x20message')[_0x4cb91d(0xc6,0xcf)](!![]))['addStringOption'](_0x570796=>_0x570796[_0x4cb91d(0x108,0xf9)](_0x4cb91d(0xe7,0xe5))['setDescription'](_0x4cb91d(0xe4,0x100))),async 'execute'(_0x3ad5f5){function _0x24cd42(_0x5e1b7f,_0x4358d6){return _0x4cb91d(_0x4358d6- -0x105,_0x5e1b7f);}await _0x3ad5f5[_0x24cd42(0xd,-0x3)]({'ephemeral':!![]});try{handleRolePermissionCheck(_0x3ad5f5);const _0x33e05a=_0x3ad5f5[_0x24cd42(0x1a,-0x12)][_0x24cd42(-0x4,-0x17)](_0x24cd42(-0xe,-0x1e));let _0x37fa1a=!![],_0x189621=0x0;if(_0x33e05a){handleTimeFormatCheck(_0x33e05a),_0x37fa1a=![],_0x189621=ms(_0x33e05a);if(!_0x189621){await _0x3ad5f5['editReply']({'content':lang[_0x24cd42(-0x29,-0x30)][_0x24cd42(-0xc,-0x2c)]['TimeParseError']||_0x24cd42(-0x3f,-0x48)});return;}}const _0x15e60e=await AFK[_0x24cd42(-0x16,-0x27)]({'userId':_0x3ad5f5[_0x24cd42(-0x2d,-0x45)]['id'],'afk':!![]});if(_0x15e60e){await _0x3ad5f5['editReply']({'content':lang[_0x24cd42(-0x7,-0x30)]['ErrorMessges'][_0x24cd42(-0x15,0x0)]||'You\x20are\x20already\x20marked\x20as\x20AFK.'});return;}const _0x315374=_0x3ad5f5['options'][_0x24cd42(-0x3c,-0x17)](_0x24cd42(-0x59,-0x3e)),_0xb57c1c=Date[_0x24cd42(-0x64,-0x44)]()+_0x189621,_0x4aaa35=_0x3ad5f5[_0x24cd42(-0x15,-0x34)];await AFK[_0x24cd42(0x23,-0x1)]({'userId':_0x3ad5f5[_0x24cd42(-0x38,-0x45)]['id']},{'userId':_0x3ad5f5['user']['id'],'afkMessage':_0x315374,'backTime':_0xb57c1c,'noBackTime':_0x37fa1a,'afk':!![],'notifyMessageId':_0x4aaa35['id']},{'upsert':!![],'new':!![]});const _0xc10fd9={'user':_0x3ad5f5[_0x24cd42(-0x4e,-0x45)]['username'],'username':_0x3ad5f5[_0x24cd42(-0x46,-0x45)]['displayName'],'reason':_0x315374,'backTime':'<t:'+Math[_0x24cd42(-0x8,-0xd)](_0xb57c1c/0x3e8)+_0x24cd42(-0x45,-0x3d)};if(config[_0x24cd42(-0x25,-0x30)][_0x24cd42(-0x63,-0x43)]){const _0x1409e9=await _0x3ad5f5[_0x24cd42(-0x3,0x2)][_0x24cd42(-0x7,-0x1a)][_0x24cd42(-0x15,-0x9)](_0x3ad5f5[_0x24cd42(-0x37,-0x45)]['id']),_0x11d94c=_0x1409e9[_0x24cd42(0x1e,-0x6)]?_0x1409e9[_0x24cd42(0x4,-0x6)]:_0x1409e9[_0x24cd42(-0x67,-0x45)][_0x24cd42(-0x22,-0xf)],_0x58c31b=_0x11d94c+'\x20'+config['AFK'][_0x24cd42(-0x20,-0x47)];await handleNicknameUpdate(_0x3ad5f5,_0x11d94c,_0x58c31b),await AFK[_0x24cd42(-0x27,-0x1)]({'userId':_0x3ad5f5['user']['id']},{'userId':_0x3ad5f5[_0x24cd42(-0x5b,-0x45)]['id'],'afkMessage':_0x315374,'backTime':_0xb57c1c,'noBackTime':_0x37fa1a,'afk':!![],'oldDisplayName':_0x11d94c},{'upsert':!![],'new':!![]});}config['AFK']['EnableAfkRole']&&await handleAFKRoleAssignment(_0x3ad5f5);if(config[_0x24cd42(-0x5,-0x30)][_0x24cd42(-0x27,-0x15)]){const _0x509072=await createNotifyMessage(_0x3ad5f5,_0xc10fd9,_0x37fa1a);await AFK['findOneAndUpdate']({'userId':_0x3ad5f5[_0x24cd42(-0x36,-0x45)]['id']},{'notifyMessageId':_0x509072['id'],'notifyChannelId':_0x3ad5f5[_0x24cd42(-0x4f,-0x34)]['id']},{'new':!![]});}await _0x3ad5f5['editReply']({'content':replacePlaceholders(lang[_0x24cd42(-0x5a,-0x30)][_0x24cd42(-0x49,-0x2e)]||'You\x20are\x20now\x20marked\x20as\x20AFK.',_0xc10fd9)});}catch(_0x1c5cc1){console[_0x24cd42(-0x2c,-0x2)](_0x24cd42(-0x25,-0x29),_0x1c5cc1),await _0x3ad5f5[_0x24cd42(-0x4a,-0x23)]({'content':_0x24cd42(-0x61,-0x40)+_0x1c5cc1[_0x24cd42(-0x1c,-0x3e)]});}}};function _0x67d4(){const _0x500cb5=['NotifyChannel','NoPermission','keys','options','8252400bgmbbE','setColor','username','name','floor','5605092TGcMqa','add','join','fetch','499202MvQNZt','Description','displayName','js-yaml','readFileSync','deferReply','error','findOneAndUpdate','AlreadyMarkedAFK','Failed\x20to\x20create\x20AFK\x20role.','guild','setName','UseNotifyEmbed','4xyRZZE','some','setTitle','9dbOufS','includes','utf8','Needed\x20an\x20AFK\x20role','test','discord.js','setDescription','Failed\x20to\x20parse\x20time.','AfkTag','EmbedColor','user','now','AfktagInDisplayName','TimeFormat','RoleCreate','An\x20error\x20occurred:\x20','setRequired','message',':R>','Invalid\x20time\x20format.\x20Please\x20use\x20s,\x20m,\x20h,\x20or\x20d.','roles','create','setNickname','AfkRoleName','NotifyEmbed','setThumbnail','../../models/afkSchema','channel','470214ceqTjL','EmbedImage','566165vfRduQ','AFK','AfkRoleColor','Success','763425Jzqbnt','ErrorMessges','EmbedThumbnail','cache','Error\x20in\x20/afk\x20command:','parse-duration','findOne','Missing\x20permissions\x20to\x20change\x20nickname.','exports','setImage','editReply','NickNameMissingPermissions','How\x20long\x20you\x20will\x20be\x20AFK:\x201m\x20(minutes),\x201h\x20(hours),\x201d\x20(days)','6023948ideZmE','NotifyMessage','time','map','send','Set\x20an\x20AFK\x20status\x20with\x20a\x20message\x20and\x20duration','members','AllowAnyone','reduce','getString','You\x20do\x20not\x20have\x20permission\x20to\x20use\x20this\x20command.'];_0x67d4=function(){return _0x500cb5;};return _0x67d4();}